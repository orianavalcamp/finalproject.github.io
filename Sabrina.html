<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Oriana Valcamp Final Project</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Ballet:opsz@16..72&family=League+Script&display=swap');
        @media (min-width: 1025px) {
            body {
                background-image: url('sabrina_laptop.png');
                background-repeat: no-repeat;
                background-size: cover;
                background-color: #38b6ff;
            }
        }
        @media (min-width: 701px) and (max-width: 1024px) and (orientation: portrait){
            body {
                background-image: url('sabrina_ipad_vertical.png');
                background-repeat: no-repeat;
                background-size: cover;
                background-color: #38b6ff;
            }
        }
        @media (min-width: 701px) and (max-width: 1024px) and (orientation: landscape){
            body {
                background-image: url('sabrina_ipad_horizontal.png');
                background-repeat: no-repeat;
                background-size: cover;
                background-color: #38b6ff;
            }
        }
        @media (min-width: 641px) and (max width: 700px){
            body {
                background-image: url('sabrina_tablet.png');
                background-repeat: no-repeat;
                background-size: cover;
                background-color: #38b6ff;
            }
        }
        @media (max-width: 640px){
            body {
                background-image: url('sabrina_phone.png');
                background-repeat: no-repeat;
                background-size: cover;
                background-color: #38b6ff;
            }
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        .item {
            width: 100%;
            max-width: 400px;
            margin: 20px;
            text-align: center;
        }

        img{
            cursor: pointer;
        }

        .button{
            font-family: league script;
            background-color: white;
            width: 10%;
            color: red;
            cursor: pointer;
        }

        #myInput {
            box-sizing: border-box;
            background-image: url('searchicon.png');
            background-position: 14px 12px;
            background-repeat: no-repeat;
            font-size: 20pt;
            font-family: league script;
            padding: 14px 20px 12px 45px;
            border: none;
        }

        #myInput:focus {outline: 3px solid #ddd;}

        .dropdown {
            float: left;
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            right: 100px;
            background-color: white;
            min-width: 150px;
            overflow: auto;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown-content a {
            color: red;
            padding: 12px 16px;
            font-size: 15pt;
            text-decoration: none;
            font-family: league script;
            display: block;
        }

        .dropdown a:hover {background-color: lightgrey}

        .show {display: block;}

        .audio-container {
            text-align: center;
            width: 50%;
            position: absolute;
            left: 25%;
            top: 10px;
        }

        .progress-container {
            height: 4px;
            background-color: rgba(255, 255, 255, 0.5);
            margin: 10px;
            position: relative;
            cursor: pointer;
        }

        .progress-bar {
            height: 100%;
            background-color: red;
            width: 0;
            transition: width 0.1s;
        }

        .audio-container .progress-container:hover .progress-bar {
            background-color: red;
        }

        /* The Popup - hidden by default */
        .popup {
            display: none; /* Hide popup by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background */
            justify-content: center;
            align-items: center;
            z-index: 9999; /* Ensure the popup is above all other content */
        }

        /* Popup Content */
        .popup-content {
            background-color: rgba(255, 255, 255, 0.5);
            padding: 20px;
            border-radius: 8px;
            max-width: 400px;
            width: 80%;
            text-align: left;
            font-family: league script;
            accent-color: red;
        }

        /* Close Button */
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            cursor: pointer;
            color: #000;
        }
    </style>
</head>
<body>
    <a href = "FinalProject.html">
        <button class="button" style="font-size: 15pt;">Back to Main Gallery</button>
    </a>
    <div class="dropdown" style="position: absolute; top: 10px; right: 10px;">
        <button>
            <img style="width: 100px; position: absolute; top: 0px; right: 0px;" src="record.gif">
        </button>
      <div class="dropdown-content">
        <a href="#" class="audioMenuItem" data-audio="Taste.mp3" data-audio2 = "TasteInstrument.mp3">Taste</a>
        <a href="#" class="audioMenuItem" data-audio="Please Please Please.mp3" data-audio2 = "PleasePleasePleaseInstrument.mp3">Please Please Please</a>
        <a href="#" class="audioMenuItem" data-audio="Good Graces.mp3" data-audio2="GoodGracesInstrument.mp3">Good Graces</a>
        <a href="#" class="audioMenuItem" data-audio="Sharpest Tool.mp3" data-audio2="SharpestToolInstrument.mp3">Sharpest Tool</a>
        <a href="#" class="audioMenuItem" data-audio="Coincidence.mp3" data-audio2="CoincidenceInstrument.mp3">Coincidence</a>
        <a href="#" class="audioMenuItem" data-audio="Bed Chem.mp3" data-audio2="BedChemInstrument.mp3">Bed Chem</a>
        <a href="#" class="audioMenuItem" data-audio="EspressoInstrument.mp3" data-audio2="spressoVocals.mp3">Espresso</a>
        <a href="#" class="audioMenuItem" data-audio="Dumb & Poetic.mp3" data-audio2="DumbandPoeticInstrument.mp3">Dumb & Poetic</a>
        <a href="#" class="audioMenuItem" data-audio="Slim Pickins.mp3" data-audio2="SlimPickinsInstrument.mp3">Slim Pickins</a>
        <a href="#" class="audioMenuItem" data-audio="Juno.mp3" data-audio2="JunoInstrument.mp3">Juno</a>
        <a href="#" class="audioMenuItem" data-audio="Lie To Girls.mp3" data-audio2="LieToGirlsInstrument.mp3">Lie To Girls</a>
        <a href="#" class="audioMenuItem" data-audio="Dont Smile.mp3" data-audio2="DontSmileInstrument.mp3">Don't Smile</a>
      </div>
    </div>

    <div class="audio-container" id="audioPlayerContainer" style="display: none; position: center;">
        <audio id="audio1" preload="auto"></audio>
        <audio id="audio2" preload="auto"></audio>

        <button class= "button" id="playPauseButton">Play</button>

        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

    </div>
        <button id="showPopupBtn">
            <img style="width: 75px; position: absolute; bottom: 0px; left: 10px;" src="mixer.png">
        </button>

    <div id="popup" class="popup">
        <div class="popup-content">
            <label for="volume1">Vocal Volume: </label>
            <input id="volume1" type="range" min="0" max="1" step=".01" value="1">
            <br>
            <label for="volume2">Instrument Volume: </label>
            <input id="volume2" type="range" min="0" max="1" step="0.01" value="1">
            <br>
            <label for="pan">Pan</label>
            <input id="pan" type="range" min="-1" max="1" step="0.1" value="0">
            <br>
        </div>
    </div>
    

    <script>
        const audio1 = document.getElementById("audio1");
        const audio2 = document.getElementById("audio2");
        const playPauseButton = document.getElementById("playPauseButton");
        const progressBar = document.getElementById("progressBar");
        const progressContainer = document.querySelector(".progress-container");
        const audioMenuItems = document.querySelectorAll(".audioMenuItem");
        const popup = document.getElementById("popup");
        const showPopupBtn = document.getElementById("showPopupBtn");
        const volumeSlider1 = document.getElementById("volume1");
        const volumeSlider2 = document.getElementById("volume2");
        const panSlider = document.getElementById("pan");

        let isPlaying = false;
        let isPopupVisible = false;

        function setUpAudioSource(audioSource, audioElement) {
            audioElement.src = audioSource;
            audioElement.load();
            audioPlayerContainer.style.display = "block";
            playPauseButton.textContent = "Play";
            progressBar.style.width = "0%";
        }

        function togglePlayPause() {
            if (isPlaying) {
                audio1.pause();
                audio2.pause();
                playPauseButton.textContent = "Play";
            } else {
                audio1.play();
                audio2.play();
                playPauseButton.textContent = "Pause";
            }
            isPlaying = !isPlaying;
        }

        function updateProgressBar() {
            const totalDuration = Math.max(audio1.duration, audio2.duration);
            const currentTime = Math.max(audio1.currentTime, audio2.currentTime);
            const progress = (currentTime / totalDuration) * 100;
            progressBar.style.width = progress + "%";
        }

        function handleProgressClick(event) {
            const progressContainerWidth = progressContainer.offsetWidth;
            const clickPosition = event.offsetX;
            const newTime = (clickPosition / progressContainerWidth) * Math.max(audio1.duration, audio2.duration);
            audio1.currentTime = newTime;
            audio2.currentTime = newTime;
        }

        function togglePopup() {
            isPopupVisible = !isPopupVisible;
            if (isPopupVisible) {
                popup.style.display = "flex";
            } else {
                popup.style.display = "none";
            }
        }

        audioMenuItems.forEach(item => {
            item.addEventListener("click", (event) => {
                const audioSource = item.getAttribute("data-audio");
                const audioSource2 = item.getAttribute("data-audio2");
                setUpAudioSource(audioSource, audio1);
                if (audioSource2) setUpAudioSource(audioSource2, audio2);
                togglePlayPause();
            });
        });

        playPauseButton.addEventListener("click", togglePlayPause);

        showPopupBtn.addEventListener("click", togglePopup);

        // Update the progress bar as the audio plays
        audio1.addEventListener("timeupdate", () => {
            const progress = (audio1.currentTime / audio1.duration) * 100;
            progressBar.style.width = `${progress}%`;
        });

        // Click event to seek audio position
        progressContainer.addEventListener("click", (e) => {
            const progressWidth = progressContainer.offsetWidth;
            const clickPosition = e.offsetX;
            const seekTime = (clickPosition / progressWidth) * audio1.duration;
            audio1.currentTime = seekTime;
            audio2.currentTime = seekTime;
        });

        window.addEventListener("click", (event) => {
            if (event.target === popup) {
                popup.style.display = "none";
            }
        });

        volumeSlider1.addEventListener("input", (event) => {
                    const volume = event.target.value;
                    audio1.volume = volume;
                });

        volumeSlider2.addEventListener("input", (event) => {
                    const volume = event.target.value;
                    audio2.volume = volume;
                });

        panSlider.addEventListener("input", (event) => {
            panNode.pan.value = event.target.value;
        });

        setInterval(updateProgressBar, 100);
    </script>
</body>
</html>
